<!-- Udemy-Style Course Modules Viewer for Ford Training Hub -->

<div class="course-modules-container">
  <!-- Sidebar with Course Modules List -->
  <div class="sidebar" [class.collapsed]="sidebarCollapsed">
    <!-- Sidebar Header -->
    <div class="sidebar-header">
      <div class="course-sidebar-info">
        <img [src]="course?.image" [alt]="course?.title" class="sidebar-course-thumbnail">
        <div class="sidebar-course-details">
          <h3>{{ course?.title }}</h3>
          <div class="course-progress-sidebar">
            <div class="progress-bar-sidebar">
              <div class="progress-fill-sidebar" [style.width.%]="course?.completionRate"></div>
            </div>
            <span class="progress-text-sidebar">{{ course?.completionRate }}% Complete</span>
          </div>
        </div>
      </div>
      <button class="sidebar-collapse-btn" (click)="toggleSidebar()">
        <span>‚Üê</span>
      </button>
    </div>

    <!-- Modules List -->
    <div class="modules-list">
      <div class="modules-header">
        <h4>{{ course?.modules }} Modules</h4>
      </div>

      <div class="module-list-item"
           *ngFor="let module of courseModules; trackBy: trackByModuleId"
           [class.active]="currentModule?.id === module.id"
           [class.completed]="module.isCompleted"
           [class.disabled]="isModuleDisabled(module)"
           (click)="selectModule(module)">

        <div class="module-list-icon">
          <span class="type-icon" [class]="module.type">
            {{ module.type === 'video' ? 'üé•' :
               module.type === 'quiz' ? 'üìù' :
               module.type === 'reading' ? 'üìñ' :
               module.type === 'assignment' ? '‚úèÔ∏è' :
               module.type === 'presentation' ? 'üìä' : 'üìÑ' }}
          </span>
        </div>

        <div class="module-list-content">
          <div class="module-list-title">{{ module.title }}</div>
          <div class="module-list-meta">
            <span class="module-type-label">{{ getTypeLabel(module.type) }}</span>
            <span class="module-duration">{{ module.duration }} min</span>
          </div>
        </div>

        <div class="module-list-status">
          <span *ngIf="module.isCompleted" class="completed-icon">‚úì</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Top Navigation Bar -->
    <div class="content-header">
      <div class="breadcrumb">
        <button class="sidebar-toggle-btn" (click)="toggleSidebar()">
          <span>‚ò∞</span>
        </button>
        <span class="bread-crumb-text">Home / Training / {{ course?.title }}</span>
      </div>

      <div class="content-actions">
        <button class="back-btn" (click)="goBack()">‚Üê Back to Courses</button>
      </div>
    </div>

    <!-- Module Content Area -->
    <div class="module-content-area">
      <!-- Module Selected -->
      <div *ngIf="currentModule" class="module-content-wrapper">
        <!-- Module Header -->
        <div class="module-header-content">
          <div class="module-info-content">
            <div class="module-icon-large" [class]="currentModule.type">
              {{ currentModule.type === 'video' ? 'üé¨' :
                 currentModule.type === 'quiz' ? 'üß©' :
                 currentModule.type === 'reading' ? 'üìö' :
                 currentModule.type === 'assignment' ? 'üìù' :
                 currentModule.type === 'presentation' ? 'üìà' : 'üìÑ' }}
            </div>
            <div class="module-details-content">
              <h1>{{ currentModule.title }}</h1>
              <div class="module-meta-content">
                <span class="module-type-content">{{ getTypeLabel(currentModule.type) }}</span>
                <span class="module-duration-content">{{ currentModule.duration }} min</span>
                <div class="module-status-indicator" [class]="currentModule.isCompleted ? 'completed' : 'in-progress'">
                  {{ currentModule.isCompleted ? 'Completed ‚úì' : 'In Progress' }}
                </div>
              </div>
            </div>
          </div>

          <div class="module-actions-content">
            <button class="complete-btn-content"
                    *ngIf="!currentModule.isCompleted && canMarkComplete(currentModule)"
                    (click)="markAsComplete(currentModule)">
              Mark as Complete
            </button>
          </div>
        </div>

        <!-- Content Display Area -->
        <div class="content-display">
          <!-- Video Content -->
          <div *ngIf="currentModule.type === 'video'" class="video-container">
            <div class="video-placeholder">
              <div class="video-icon">‚ñ∂Ô∏è</div>
              <h3>{{ currentModule.title }}</h3>
              <p>This is where the video player would load for this module.</p>
              <p>In a real implementation, you would have:</p>
              <ul>
                <li>HTML5 video player with controls</li>
                <li>Progress tracking</li>
                <li>Resume functionality</li>
                <li>Full screen option</li>
              </ul>
              <button class="watch-video-btn">Watch Video</button>
            </div>
          </div>

          <!-- Quiz Content -->
          <div *ngIf="currentModule.type === 'quiz'" class="quiz-container">
            <div class="quiz-header">
              <h3>Test Your Knowledge</h3>
              <p>Answer the questions below to complete this module.</p>
            </div>
            <div class="quiz-placeholder">
              <div class="quiz-icon">üß©</div>
              <h4>Sample Questions Would Load Here</h4>
              <div class="sample-questions">
                <div class="question-item">
                  <p><strong>Question 1:</strong> What is the main topic of this module?</p>
                  <div class="options">
                    <div class="option">A) Basic concepts</div>
                    <div class="option">B) Advanced concepts</div>
                    <div class="option correct">C) Learning the fundamentals</div>
                    <div class="option">D) Expert level content</div>
                  </div>
                </div>
              </div>
              <button class="submit-quiz-btn">Submit Quiz</button>
            </div>
          </div>

          <!-- Reading Content -->
          <div *ngIf="currentModule.type === 'reading'" class="reading-container">
            <div class="reading-header">
              <h3>{{ currentModule.title }}</h3>
            </div>
            <div class="reading-content">
              <div class="reading-text">
                <p>Welcome to this comprehensive learning module. Here you'll find detailed information and resources to help you understand the key concepts.</p>

                <h4>Key Learning Objectives</h4>
                <ul>
                  <li>Understand fundamental concepts</li>
                  <li>Apply best practices</li>
                  <li>Practice through examples</li>
                  <li>Complete hands-on exercises</li>
                </ul>

                <h4>Content Overview</h4>
                <p>This module covers essential knowledge and skills that are foundational to your professional development. The material is structured to build your understanding progressively, from basic concepts to more advanced applications.</p>

                <div class="download-section">
                  <h5>Download Resources</h5>
                  <div class="download-items">
                    <div class="download-item">
                      <span class="download-icon">üìÑ</span>
                      <span>Study Guide PDF</span>
                      <button class="download-btn">Download</button>
                    </div>
                    <div class="download-item">
                      <span class="download-icon">üìä</span>
                      <span>Reference Charts</span>
                      <button class="download-btn">Download</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Assignment Content -->
          <div *ngIf="currentModule.type === 'assignment'" class="assignment-container">
            <div class="assignment-header">
              <h3>{{ currentModule.title }} - Hands-on Exercise</h3>
              <p>Complete the following assignment to demonstrate your understanding of the concepts.</p>
            </div>
            <div class="assignment-content">
              <div class="assignment-instructions">
                <h4>Instructions:</h4>
                <ol>
                  <li>Read through the provided materials</li>
                  <li>Complete the practical exercise</li>
                  <li>Submit your work for review</li>
                  <li>Provide justification for your approach</li>
                </ol>
              </div>

              <div class="assignment-submission">
                <div class="submission-area">
                  <textarea placeholder="Enter your assignment solution here..." rows="8"></textarea>
                  <div class="submission-actions">
                    <label class="upload-btn">
                      üìé Upload Files
                      <input type="file" multiple style="display: none;">
                    </label>
                    <button class="submit-assignment-btn">Submit Assignment</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Presentation Content -->
          <div *ngIf="currentModule.type === 'presentation'" class="presentation-container">
            <div class="presentation-header">
              <h3>{{ currentModule.title }}</h3>
              <p>Review the presentation slides below.</p>
            </div>
            <div class="presentation-content">
              <div class="presentation-placeholder">
                <div class="slides-navigation">
                  <button class="slide-nav-btn" (click)="previousSlide()" [disabled]="currentSlideIndex === 0">‚¨ÖÔ∏è</button>
                  <span class="slide-counter">{{ currentSlideIndex + 1 }} / {{ totalSlides }}</span>
                  <button class="slide-nav-btn" (click)="nextSlide()" [disabled]="currentSlideIndex === totalSlides - 1">‚û°Ô∏è</button>
                </div>

                <div class="slide-content">
                  <div class="slide-icon">üìä</div>
                  <h4>Slide {{ currentSlideIndex + 1 }}</h4>
                  <p>This slide would contain charts, data visualizations, or presentation content related to {{ currentModule.title }}</p>
                  <div class="slide-keypoints">
                    <strong>Key Points:</strong>
                    <ul>
                      <li>Important data points</li>
                      <li>Visual representations</li>
                      <li>Data analysis</li>
                    </ul>
                  </div>
                </div>

                <div class="presentation-actions">
                  <button class="fullscreen-btn">‚õ∂ Fullscreen</button>
                  <button class="download-presentation-btn">üì• Download Slides</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Default Content -->
          <div *ngIf="!['video', 'quiz', 'reading', 'assignment', 'presentation'].includes(currentModule.type)" class="default-container">
            <div class="default-content">
              <div class="content-icon">üìÑ</div>
              <h3>{{ currentModule.title }}</h3>
              <p>{{ getModuleDescription(currentModule.type) }}</p>
              <button class="access-content-btn">Access Content</button>
            </div>
          </div>
        </div>

        <!-- Module Navigation -->
        <div class="module-navigation">
          <div class="nav-prev">
            <button *ngIf="getPreviousModule()" class="nav-btn"
                    (click)="selectModule(getPreviousModule()!)">
              ‚Üê Previous: {{ getPreviousModule()?.title }}
            </button>
          </div>

          <div class="module-completion">
            <button *ngIf="!currentModule.isCompleted && canMarkComplete(currentModule)"
                    class="mark-complete-btn"
                    (click)="markAsComplete(currentModule)">
              Mark as Complete
            </button>
            <div *ngIf="currentModule.isCompleted" class="completed-badge">
              ‚úì Module Completed
            </div>
          </div>

          <div class="nav-next">
            <button *ngIf="getNextModule()" class="nav-btn"
                    (click)="selectModule(getNextModule()!)">
              Next: {{ getNextModule()?.title }} ‚Üí
            </button>
          </div>
        </div>
      </div>

      <!-- No Module Selected -->
      <div *ngIf="!currentModule" class="no-module-selected">
        <div class="welcome-message">
          <div class="welcome-icon">üéØ</div>
          <h2>Welcome to {{ course?.title }}</h2>
          <p>Select a module from the sidebar to begin your learning journey.</p>

          <div class="course-overview">
            <div class="overview-stat">
              <span class="stat-number">{{ course?.modules }}</span>
              <span class="stat-label">Modules</span>
            </div>
            <div class="overview-stat">
              <span class="stat-number">{{ getTotalDuration(course) }}h</span>
              <span class="stat-label">Duration</span>
            </div>
            <div class="overview-stat">
              <span class="stat-number">{{ course?.completionRate }}%</span>
              <span class="stat-label">Complete</span>
            </div>
          </div>

          <button *ngIf="courseModules.length > 0"
                  class="start-course-btn"
                  (click)="selectModule(courseModules[0])">
            Start Course
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
