<!-- Recommended Courses by Category -->
  <div class="section">
    <div class="section-header">
      <h2>Recommended Courses</h2>
      <p>Choose a category to start your learning journey</p>
    </div>

    <!-- Carousel Container -->
    <div class="carousel-container" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"
         (touchstart)="onTouchStart($event)" (touchend)="onTouchEnd($event)">
      <div class="carousel" [style.transform]="'translateX(' + (-currentIndex * 100) + '%)'">
        <!-- Slide 1: 3 courses (Safety, Leadership, Compliance) -->
        <div class="slide">
          <div class="slide-items">
            <!-- Course 1: Safety -->
            <div class="course-card" (click)="onCourseClick(null)">
              <img class="course-image" src="/workplace-hazard-identification.jpg" alt="Workplace Hazard Recognition" />
              <div class="course-info">
                <h3>Workplace Hazard Recognition</h3>
                <p class="description">Identify and mitigate workplace hazards.</p>
                <div class="course-details">
                  <span class="theme">Safety</span>
                  <span class="duration">1.0h</span>
                  <span class="modules">4 modules</span>
                </div>
                <div class="audience">All employees</div>
                <button class="start-btn">Start Course</button>

                <!-- Course Modules Section -->
                <div class="course-modules-section">
                  <button class="expand-modules-btn" (click)="toggleCourseModules(1)">
                    <span>â†“</span> Show Course Modules
                  </button>

                  <div class="modules-list" *ngIf="isCourseModulesExpanded(1)">
                    <div class="module-preview-item" *ngFor="let module of getCourseModules(1); trackBy: trackByModuleId">
                      <div class="module-preview-icon" [class]="module.type">
                        {{ module.type === 'video' ? 'ğŸ¬' :
                           module.type === 'quiz' ? 'ğŸ“' :
                           module.type === 'reading' ? 'ğŸ“–' :
                           module.type === 'assignment' ? 'âœï¸' :
                           module.type === 'presentation' ? 'ğŸ“Š' : 'ğŸ“„' }}
                      </div>
                      <div class="module-preview-content">
                        <div class="module-preview-title">{{ module.title }}</div>
                        <div class="module-preview-meta">
                          <span class="module-preview-type">{{ getModuleTypeLabel(module.type) }}</span>
                          <span class="module-preview-duration">{{ module.duration }} min</span>
                        </div>
                      </div>
                      <div class="module-preview-status">
                        <span class="status-badge"
                              [class.completed]="module.isCompleted"
                              [class.locked]="isModuleLocked(1, module)"
                              [class.available]="!module.isCompleted && !isModuleLocked(1, module)">
                          {{ module.isCompleted ? 'âœ“' : isModuleLocked(1, module) ? 'ğŸ”’' : 'â–¶' }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Course 2: Leadership -->
            <div class="course-card" (click)="onCourseClick(null)">
              <img class="course-image" src="/Effective Communication Skills.jpeg" alt="Effective Communication Skills" />
              <div class="course-info">
                <h3>Effective Communication Skills</h3>
                <p class="description">Improve team communication and leadership.</p>
                <div class="course-details">
                  <span class="theme">Leadership</span>
                  <span class="duration">4.0h</span>
                  <span class="modules">6 modules</span>
                </div>
                <div class="audience">Managers and supervisors</div>
                <button class="start-btn">Start Course</button>

                <!-- Course Modules Section -->
                <div class="course-modules-section">
                  <button class="expand-modules-btn" (click)="toggleCourseModules(2)">
                    <span>â†“</span> Show Course Modules
                  </button>

                  <div class="modules-list" *ngIf="isCourseModulesExpanded(2)">
                    <div class="module-preview-item" *ngFor="let module of getCourseModules(2); trackBy: trackByModuleId">
                      <div class="module-preview-icon" [class]="module.type">
                        {{ module.type === 'video' ? 'ğŸ¬' :
                           module.type === 'quiz' ? 'ğŸ“' :
                           module.type === 'reading' ? 'ğŸ“–' :
                           module.type === 'assignment' ? 'âœï¸' :
                           module.type === 'presentation' ? 'ğŸ“Š' : 'ğŸ“„' }}
                      </div>
                      <div class="module-preview-content">
                        <div class="module-preview-title">{{ module.title }}</div>
                        <div class="module-preview-meta">
                          <span class="module-preview-type">{{ getModuleTypeLabel(module.type) }}</span>
                          <span class="module-preview-duration">{{ module.duration }} min</span>
                        </div>
                      </div>
                      <div class="module-preview-status">
                        <span class="status-badge"
                              [class.completed]="module.isCompleted"
                              [class.locked]="isModuleLocked(2, module)"
                              [class.available]="!module.isCompleted && !isModuleLocked(2, module)">
                          {{ module.isCompleted ? 'âœ“' : isModuleLocked(2, module) ? 'ğŸ”’' : 'â–¶' }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Course 3: Compliance -->
            <div class="course-card" (click)="onCourseClick(null)">
              <img class="course-image" src="/anti-Harassment.jpg" alt="Anti-Harassment Training" />
              <div class="course-info">
                <h3>Anti-Harassment Training</h3>
                <p class="description">Understand and prevent workplace harassment.</p>
                <div class="course-details">
                  <span class="theme">Compliance</span>
                  <span class="duration">2.0h</span>
                  <span class="modules">3 modules</span>
                </div>
                <div class="audience">All employees</div>
                <button class="start-btn">Start Course</button>

                <!-- Course Modules Section -->
                <div class="course-modules-section">
                  <button class="expand-modules-btn" (click)="toggleCourseModules(3)">
                    <span>â†“</span> Show Course Modules
                  </button>

                  <div class="modules-list" *ngIf="isCourseModulesExpanded(3)">
                    <div class="module-preview-item" *ngFor="let module of getCourseModules(3); trackBy: trackByModuleId">
                      <div class="module-preview-icon" [class]="module.type">
                        {{ module.type === 'video' ? 'ğŸ¬' :
                           module.type === 'quiz' ? 'ğŸ“' :
                           module.type === 'reading' ? 'ğŸ“–' :
                           module.type === 'assignment' ? 'âœï¸' :
                           module.type === 'presentation' ? 'ğŸ“Š' : 'ğŸ“„' }}
                      </div>
                      <div class="module-preview-content">
                        <div class="module-preview-title">{{ module.title }}</div>
                        <div class="module-preview-meta">
                          <span class="module-preview-type">{{ getModuleTypeLabel(module.type) }}</span>
                          <span class="module-preview-duration">{{ module.duration }} min</span>
                        </div>
                      </div>
                      <div class="module-preview-status">
                        <span class="status-badge"
                              [class.completed]="module.isCompleted"
                              [class.locked]="isModuleLocked(3, module)"
                              [class.available]="!module.isCompleted && !isModuleLocked(3, module)">
                          {{ module.isCompleted ? 'âœ“' : isModuleLocked(3, module) ? 'ğŸ”’' : 'â–¶' }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Slide 2: 2 courses (Soft Skills, Technical) -->
        <div class="slide">
          <div class="slide-items">
            <!-- Course 4: Soft Skills -->
            <div class="course-card" (click)="onCourseClick(null)">
              <img class="course-image" src="/time-management.jpeg" alt="Time Management" />
              <div class="course-info">
                <h3>Time Management</h3>
                <p class="description">Effectively manage time and tasks for better productivity.</p>
                <div class="course-details">
                  <span class="theme">Soft Skills</span>
                  <span class="duration">1.5h</span>
                  <span class="modules">3 modules</span>
                </div>
                <div class="audience">All employees</div>
                <button class="start-btn">Start Course</button>

                <!-- Course Modules Section -->
                <div class="course-modules-section">
                  <button class="expand-modules-btn" (click)="toggleCourseModules(4)">
                    <span>â†“</span> Show Course Modules
                  </button>

                  <div class="modules-list" *ngIf="isCourseModulesExpanded(4)">
                    <div class="module-preview-item" *ngFor="let module of getCourseModules(4); trackBy: trackByModuleId">
                      <div class="module-preview-icon" [class]="module.type">
                        {{ module.type === 'video' ? 'ğŸ¬' :
                           module.type === 'quiz' ? 'ğŸ“' :
                           module.type === 'reading' ? 'ğŸ“–' :
                           module.type === 'assignment' ? 'âœï¸' :
                           module.type === 'presentation' ? 'ğŸ“Š' : 'ğŸ“„' }}
                      </div>
                      <div class="module-preview-content">
                        <div class="module-preview-title">{{ module.title }}</div>
                        <div class="module-preview-meta">
                          <span class="module-preview-type">{{ getModuleTypeLabel(module.type) }}</span>
                          <span class="module-preview-duration">{{ module.duration }} min</span>
                        </div>
                      </div>
                      <div class="module-preview-status">
                        <span class="status-badge"
                              [class.completed]="module.isCompleted"
                              [class.locked]="isModuleLocked(4, module)"
                              [class.available]="!module.isCompleted && !isModuleLocked(4, module)">
                          {{ module.isCompleted ? 'âœ“' : isModuleLocked(4, module) ? 'ğŸ”’' : 'â–¶' }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Course 5: Technical -->
            <div class="course-card" (click)="onCourseClick(null)">
              <img class="course-image" src="/cyber.jpg" alt="Cybersecurity Basics" />
              <div class="course-info">
                <h3>Cybersecurity Basics</h3>
                <p class="description">Protect against cyber threats and secure digital practices.</p>
                <div class="course-details">
                  <span class="theme">Technical</span>
                  <span class="duration">3.0h</span>
                  <span class="modules">5 modules</span>
                </div>
                <div class="audience">All employees</div>
                <button class="start-btn">Start Course</button>

                <!-- Course Modules Section -->
                <div class="course-modules-section">
                  <button class="expand-modules-btn" (click)="toggleCourseModules(5)">
                    <span>â†“</span> Show Course Modules
                  </button>

                  <div class="modules-list" *ngIf="isCourseModulesExpanded(5)">
                    <div class="module-preview-item" *ngFor="let module of getCourseModules(5); trackBy: trackByModuleId">
                      <div class="module-preview-icon" [class]="module.type">
                        {{ module.type === 'video' ? 'ğŸ¬' :
                           module.type === 'quiz' ? 'ğŸ“' :
                           module.type === 'reading' ? 'ğŸ“–' :
                           module.type === 'assignment' ? 'âœï¸' :
                           module.type === 'presentation' ? 'ğŸ“Š' : 'ğŸ“„' }}
                      </div>
                      <div class="module-preview-content">
                        <div class="module-preview-title">{{ module.title }}</div>
                        <div class="module-preview-meta">
                          <span class="module-preview-type">{{ getModuleTypeLabel(module.type) }}</span>
                          <span class="module-preview-duration">{{ module.duration }} min</span>
                        </div>
                      </div>
                      <div class="module-preview-status">
                        <span class="status-badge"
                              [class.completed]="module.isCompleted"
                              [class.locked]="isModuleLocked(5, module)"
                              [class.available]="!module.isCompleted && !isModuleLocked(5, module)">
                          {{ module.isCompleted ? 'âœ“' : isModuleLocked(5, module) ? 'ğŸ”’' : 'â–¶' }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation arrows -->
      <button class="nav-btn prev" (click)="prevSlide()" *ngIf="totalSlides > 1">
        &#10094;
      </button>
      <button class="nav-btn next" (click)="nextSlide()" *ngIf="totalSlides > 1">
        &#10095;
      </button>

      <!-- Indicators -->
      <div class="indicators" *ngIf="totalSlides > 1">
        <button class="indicator" *ngFor="let slide of slides; let i = index"
                [class.active]="i === currentIndex"
                (click)="goToSlide(i)">
        </button>
      </div>
    </div>
  </div>